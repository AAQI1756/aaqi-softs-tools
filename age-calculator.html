<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Age Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .container {
      background: #f9f9f9;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      text-align: center;
      width: 90%;
      max-width: 400px;
    }

    h2 {
      margin-bottom: 15px;
      color: #333;
    }

    input, button {
      padding: 12px;
      margin: 8px 0;
      width: 90%;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
    }

    button {
      background: #28a745;
      color: #fff;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #218838;
    }

    /* Blur effect */
    .blur {
      filter: blur(5px);
      pointer-events: none;
    }

    /* Popups */
    .popup, .result-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      text-align: center;
      width: 300px;
      display: none;
      z-index: 1000;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: #eee;
      border-radius: 10px;
      margin: 10px 0;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0;
      background: #28a745;
      transition: width 0.1s;
    }

    .close-btn {
      margin-top: 15px;
      padding: 10px 15px;
      border: none;
      background: #dc3545;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
    }

    .close-btn:hover {
      background: #c82333;
    }
  </style>
</head>
<body>
  <div class="container" id="main">
    <h2>Age Calculator 🎂</h2>
    <input type="text" id="name" placeholder="Enter your name" required>
    <input type="date" id="dob" required>
    <button onclick="calculateAge()">Calculate Age</button>
  </div>

  <!-- Processing Popup -->
  <div class="popup" id="processingPopup">
    <h3>Processing...</h3>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <p id="progressText">0%</p>
  </div>

  <!-- Result Popup -->
  <div class="result-popup" id="resultPopup">
    <h3 id="greeting"></h3>
    <p id="ageResult"></p>
    <p id="birthdayMsg"></p>
    <p id="quote"></p>
    <button class="close-btn" onclick="closeResult()">Close</button>
  </div>

  <script>
    const quotes = [
      "Hard work beats talent when talent doesn’t work hard.",
      "Push yourself, because no one else is going to do it for you.",
      "Great things never come from comfort zones.",
      "Dream it. Wish it. Do it.",
      "Success doesn’t just find you. You have to go out and get it."
    ];

    function calculateAge() {
      let name = document.getElementById("name").value;
      let dob = document.getElementById("dob").value;

      if (!name || !dob) {
        alert("Please enter your name and date of birth!");
        return;
      }

      document.getElementById("main").classList.add("blur");
      document.getElementById("processingPopup").style.display = "block";

      let progress = 0;
      let interval = setInterval(() => {
        progress++;
        document.getElementById("progressFill").style.width = progress + "%";
        document.getElementById("progressText").innerText = progress + "%";

        if (progress >= 100) {
          clearInterval(interval);
          document.getElementById("processingPopup").style.display = "none";
          showResult(name, dob);
        }
      }, 15); // ~1.5 sec
    }

    function showResult(name, dob) {
      let birthDate = new Date(dob);
      let today = new Date();

      // Age calculation
      let age = today.getFullYear() - birthDate.getFullYear();
      let monthDiff = today.getMonth() - birthDate.getMonth();
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }

      // Next birthday
      let nextBirthday = new Date(today.getFullYear(), birthDate.getMonth(), birthDate.getDate());
      if (today > nextBirthday) {
        nextBirthday.setFullYear(today.getFullYear() + 1);
      }

      let birthdayMsg = `Your next birthday is on ${nextBirthday.toDateString()}. 🎉`;

      // Check if today is birthday
      if (today.getDate() === birthDate.getDate() && today.getMonth() === birthDate.getMonth()) {
        birthdayMsg = "🎂 Happy Birthday! 🎉 From AAQI Soft Solutions 💖";
      } 
      else {
        // Check if birthday is within next 7 days
        let diffDays = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));
        if (diffDays <= 7) {
          birthdayMsg = "🎁 Advance Happy Birthday! 🎉 From AAQI Soft Solutions 💖";
        }
      }

      let randomQuote = quotes[Math.floor(Math.random() * quotes.length)];

      document.getElementById("greeting").innerText = `Hello ${name}! 👋`;
      document.getElementById("ageResult").innerText = `You are ${age} years old.`;
      document.getElementById("birthdayMsg").innerText = birthdayMsg;
      document.getElementById("quote").innerText = randomQuote;

      document.getElementById("resultPopup").style.display = "block";
    }

    function closeResult() {
      document.getElementById("main").classList.remove("blur");
      document.getElementById("resultPopup").style.display = "none";
    }
  </script>
</body>
</html>
