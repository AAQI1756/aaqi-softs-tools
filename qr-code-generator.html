<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Code Generator</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
body {
  margin:0; font-family:'Montserrat',sans-serif;
  display:flex; justify-content:center; align-items:flex-start;
  min-height:100vh; padding:20px; background:#ffffff;
}
.container {
  background:#fefefe; padding:25px; border-radius:25px;
  box-shadow:0 15px 35px rgba(0,0,0,0.1);
  display:flex; flex-direction:column; align-items:center; gap:20px;
  width:100%; max-width:600px;
}
h2{text-align:center;color:#333;margin:0;}
input, select, textarea, button {
  width:100%; padding:12px 15px; border-radius:12px; border:1px solid #ccc;
  font-size:16px; transition: all 0.3s; margin-bottom:15px;
}
textarea{resize:vertical;}
input:focus, select:focus, textarea:focus{outline:2px solid #06b6d4;}
button{
  background:#06b6d4;color:#fff;cursor:pointer;font-weight:bold;border:none;
  transition:all 0.3s;
}
button:hover{background:#0ea5e9; transform: scale(1.05);}
canvas{margin-top:20px;border-radius:15px;width:100%;height:auto;box-shadow:0 8px 25px rgba(0,0,0,0.1);}
#popup{
  display:none; position:fixed; top:0; left:0; width:100%; height:100%;
  backdrop-filter:blur(5px); background: rgba(0,0,0,0.3);
  justify-content:center; align-items:center; z-index:1000;
}
#popupContent{
  background:#fff; padding:25px; border-radius:20px; text-align:center; width:300px;
}
#progressBar{width:100%; height:20px; border-radius:10px; background:#eee; overflow:hidden; margin-top:15px;}
#progressBarInner{width:0%; height:100%; background:#06b6d4; transition: width 0.1s;}
@media(max-width:600px){.container{padding:20px;gap:15px;} input,select,button,textarea{font-size:14px;padding:10px 12px;}}
</style>
</head>
<body>
<div class="container">
  <h2>QR Code Generator</h2>
  <select id="categorySelect">
    <option value="">Select Category</option>
    <option value="Text">Text</option>
    <option value="Payment">Payment Info</option>
    <option value="Crypto">Crypto Deposit</option>
    <option value="Social">Social Media</option>
    <option value="Event">Event</option>
    <option value="Email">Email</option>
    <option value="Phone">Phone</option>
    <option value="WiFi">WiFi</option>
    <option value="URL">URL</option>
  </select>
  <div id="detailsInput"></div>
  <button id="generateBtn" style="display:none;">Generate QR Code</button>
  <canvas id="qrCanvas"></canvas>
  <button id="downloadBtn">Download QR Code</button>
</div>

<!-- Popup -->
<div id="popup">
  <div id="popupContent">
    <h3>Processing QR Code...</h3>
    <div id="progressBar"><div id="progressBarInner"></div></div>
    <p id="progressText">0%</p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
const categorySelect = document.getElementById('categorySelect');
const detailsInput = document.getElementById('detailsInput');
const generateBtn = document.getElementById('generateBtn');
const canvas = document.getElementById('qrCanvas');
const downloadBtn = document.getElementById('downloadBtn');
const popup = document.getElementById('popup');
const progressBarInner = document.getElementById('progressBarInner');
const progressText = document.getElementById('progressText');

categorySelect.addEventListener('change', () => {
  const cat = categorySelect.value;
  detailsInput.innerHTML = '';
  generateBtn.style.display = 'none';
  if(!cat) return;
  let html='';
  switch(cat){
    case 'Text':
      html=`<textarea id='textInput' rows='4' placeholder='Enter text here, use Enter for new lines'></textarea>`;
      break;
    case 'Payment':
      html=`<input id='bankName' placeholder='Bank Name'>
            <input id='accountNumber' placeholder='Account Number'>
            <input id='iban' placeholder='IBAN'>
            <input id='accountHolder' placeholder='Account Holder Name'>`;
      break;
    case 'Crypto':
      html=`<input id='cryptoAddress' placeholder='Crypto Wallet Address'>
            <input id='cryptoAmount' placeholder='Amount'>`;
      break;
    case 'Social':
      html=`<input id='facebook' placeholder='Facebook (opt)'>
            <input id='whatsapp' placeholder='WhatsApp (opt)'>
            <input id='instagram' placeholder='Instagram (opt)'>
            <input id='twitter' placeholder='Twitter (opt)'>`;
      break;
    case 'Event':
      html=`<input id='eventName' placeholder='Event Name'>
            <input type='date' id='eventDate' placeholder='Date'>
            <input type='time' id='eventTime' placeholder='Time'>
            <input id='organizedBy' placeholder='Organized By'>
            <input id='specialGuest' placeholder='Special Guest'>
            <input id='inviter' placeholder='Inviter Name'>
            <input id='receiver' placeholder='Receiver Name'>`;
      break;
    case 'Email': html=`<input id='emailInput' type='email' placeholder='Email Address'>`; break;
    case 'Phone': html=`<input id='phoneInput' type='tel' placeholder='Phone Number'>`; break;
    case 'WiFi': html=`<input id='wifiSSID' placeholder='SSID'>
                    <input id='wifiPass' placeholder='Password'>
                    <select id='wifiType'><option value='WPA'>WPA/WPA2</option><option value='WEP'>WEP</option><option value='nopass'>No Password</option></select>`; break;
    case 'URL': html=`<input id='urlInput' type='url' placeholder='Enter URL'>`; break;
  }
  detailsInput.innerHTML=html;
  generateBtn.style.display='block';
});

function getQRText(cat){
  switch(cat){
    case 'Payment':
      return `Bank: ${document.getElementById('bankName').value}
Account: ${document.getElementById('accountNumber').value}
IBAN: ${document.getElementById('iban').value}
Holder: ${document.getElementById('accountHolder').value}`;
    case 'Crypto':
      return `Crypto Address: ${document.getElementById('cryptoAddress').value}
Amount: ${document.getElementById('cryptoAmount').value}`;
    case 'Social':
      return `Facebook: ${document.getElementById('facebook').value}
WhatsApp: ${document.getElementById('whatsapp').value}
Instagram: ${document.getElementById('instagram').value}
Twitter: ${document.getElementById('twitter').value}`;
    case 'Event':
      return `Event Name: ${document.getElementById('eventName').value}
Date: ${document.getElementById('eventDate').value}
Time: ${document.getElementById('eventTime').value}
Organizer: ${document.getElementById('organizedBy').value}
Special Guest: ${document.getElementById('specialGuest').value}
Inviter: ${document.getElementById('inviter').value}
Receiver: ${document.getElementById('receiver').value}`;
    case 'Email': return `Email: ${document.getElementById('emailInput').value}`;
    case 'Phone': return `Phone: ${document.getElementById('phoneInput').value}`;
    case 'WiFi':
      return `WIFI:T:${document.getElementById('wifiType').value};S:${document.getElementById('wifiSSID').value};P:${document.getElementById('wifiPass').value};;`;
    case 'URL': return `URL: ${document.getElementById('urlInput').value}`;
    default:
      return document.getElementById('textInput').value;
  }
}

function showPopupAndGenerate(qrText){
  popup.style.display='flex';
  progressBarInner.style.width='0%';
  progressText.textContent='0%';
  let progress=0;
  const interval=setInterval(()=>{
    progress++;
    progressBarInner.style.width=progress+'%';
    progressText.textContent=progress+'%';
    if(progress>=100){
      clearInterval(interval);
      popup.style.display='none';
      QRCode.toCanvas(canvas, qrText, {width:300,margin:2,color:{dark:'#0ea5e9',light:'#ffffff'}}, function(error){if(error) console.error(error);});
    }
  },40);
}

generateBtn.addEventListener('click',()=>{
  const cat=categorySelect.value;
  const text=getQRText(cat);
  if(!text.trim()){ alert('Please fill all required fields'); return; }
  showPopupAndGenerate(text);
});

downloadBtn.addEventListener('click',()=>{
  if(!canvas.toDataURL()) return alert('Please generate a QR code first');
  const link=document.createElement('a');
  link.download='qr_code.png';
  link.href=canvas.toDataURL();
  link.click();
});
</script>
</body>
</html>
